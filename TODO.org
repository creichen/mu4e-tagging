* Main
** DONE Show tags column with tag summaries + initial tagging
- State "DONE"       from "TODO"       [2023-10-13 Fr 07:49]
*** DONE minor mode to bind retagging hotkeys to specific tagging commands in easily-updateable list in .emacs.  Distinguish 'exclusive' from 'nonexclusive' tags; auto-remove exclusive ones when tagging.
- State "DONE"       from "TODO"       [2023-10-11 Wed 06:54]
*** DONE flag tagging
- State "DONE"       from "TODO"       [2023-10-11 Wed 07:30]
*** DONE category tagging
- State "DONE"       from "TODO"       [2023-10-11 Wed 07:30]
*** DONE merge old and new
- State "DONE"       from "TODO"       [2023-10-11 Mi 16:52]
*** DONE refactor toggles
- State "DONE"       from "TODO"       [2023-10-12 Do 07:10]
**** DONE check that creichen/mu4e-tagging-categories-get and its counterpart do the right things
- State "DONE"       from "TODO"       [2023-10-12 Do 07:10]
*** DONE move my customisation out of the tagging mode description
- State "DONE"       from "TODO"       [2023-10-12 Do 12:56]
*** DONE convert rest of code to alist format
- State "DONE"       from "TODO"       [2023-10-13 Fri 07:09]
*** DONE untag-prefix to key format
- State "DONE"       from "TODO"       [2023-10-13 Fr 07:27]
*** DONE key and action for 'uncategorised'
- State "DONE"       from "TODO"       [2023-10-13 Fr 07:40]
** DONE initial query information
- State "DONE"       from "TODO"       [2023-10-15 So 16:59]
*** DONE filtering: search by category
- State "DONE"       from "TODO"       [2023-10-13 Fri 20:02]
*** DONE filtering: search by uncategorised
- State "DONE"       from "TODO"       [2023-10-13 Fri 20:41]
*** DONE filtering: search by flag(s)
- State "DONE"       from "TODO"       [2023-10-13 Fri 20:41]
*** DONE filtering: seatch by negative flag(s)
- State "DONE"       from "TODO"       [2023-10-13 Fri 20:41]
*** DONE fixme: avoid aggregative multi-rewriting
- State "DONE"       from "TODO"       [2023-10-14 Sat 09:58]
*** DONE disable search
- State "DONE"       from "TODO"       [2023-10-14 Sat 09:58]
*** DONE functionality: search by category
- State "DONE"       from "TODO"       [2023-10-14 Sat 15:04]
*** DONE functionality: search by uncategorized
- State "DONE"       from "TODO"       [2023-10-14 Sat 15:04]
*** DONE functionality: search by flag(s)
- State "DONE"       from "TODO"       [2023-10-14 Sat 15:04]
*** DONE functionality: search by negative flag(s)
- State "DONE"       from "TODO"       [2023-10-14 Sat 15:04]
*** DONE fixme: auto-clear query-submode and tagging mode when they are interfering
- State "DONE"       from "TODO"       [2023-10-14 Sat 15:04]
*** DONE fix: tagging keymap precedence
- State "DONE"       from "TODO"       [2023-10-14 Sat 15:15]
*** DONE UI: enter query mode
- State "DONE"       from "TODO"       [2023-10-15 So 10:39]
*** DONE UI: exit query mode
- State "DONE"       from "TODO"       [2023-10-15 So 10:39]
*** DONE UI: set search category
- State "DONE"       from "TODO"       [2023-10-15 So 10:39]
*** DONE UI: set no search category
- State "DONE"       from "TODO"       [2023-10-15 So 10:39]
*** DONE UI: figure out why changing category triggers search rerun properly, but other case does not
- State "DONE"       from "TODO"       [2023-10-15 So 16:58]
*** DONE UI: toggle flag
- State "DONE"       from "TODO"       [2023-10-15 So 16:58]
*** DONE UI: toggle negative flag
- State "DONE"       from "TODO"       [2023-10-15 So 16:58]
** DONE size info window automatically (might already be implemented?)
- State "DONE"       from "TODO"       [2023-10-16 Mon 10:02]
** DONE cleanup
- State "DONE"       from "TODO"       [2023-10-20 Fri 06:43]
*** DONE fix re-enable after previous disable
- State "DONE"       from "TODO"       [2023-10-15 So 17:15]
*** DONE fix gradual progression for flags
- State "DONE"       from "TODO"       [2023-10-15 So 18:46]
*** DONE fix :weight (tentatively)
- State "DONE"       from "TODO"       [2023-10-15 Sun 20:00]
*** DONE text-align the tags-info box properly
- State "DONE"       from "TODO"       [2023-10-16 Mon 09:43]
Key   Flag   Tag  [C-w]
[C-d]             filter      (uncategorised)
[4]          40   filter      edap40
[1]          15   require(+)  edap15
[+]   f       +   -(block)    todo
*** DONE show search status info
- State "DONE"       from "TODO"       [2023-10-16 Mon 09:43]
*** DONE status window has custom face so we can adjust font size etc.
- State "DONE"       from "TODO"       [2023-10-16 Mon 09:43]
*** DONE cleanup debug code
- State "DONE"       from "TODO"       [2023-10-16 Mon 09:48]
*** DONE group customizing
- State "DONE"       from "TODO"       [2023-10-16 Mon 10:00]
*** DONE missing defun docs
- State "DONE"       from "TODO"       [2023-10-16 Mon 10:30]
** DONE code style cleanup
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:32]
*** DONE (provide) at END
- State "DONE"       from "TODO"       [2023-10-20 Fri 07:45]
*** DONE provide 'mu4e-tagging
- State "DONE"       from "TODO"       [2023-10-20 Fri 07:45]
*** DONE package-lint
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE document deps
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE 80 columns
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE 71 columsn for doc-strings
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE mention EVERY arg, affected var/custom
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE Use `..' for refs
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE Args always CAPS
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:26]
*** DONE M-x checkdoc
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:31]
*** DONE no standalone ")"
- State "DONE"       from "TODO"       [2023-10-20 Fri 12:31]
** TODO UI refinements
*** DONE merge the key-tables
- State "DONE"       from "TODO"       [2023-10-20 Fri 15:16]
*** DONE more generic dispatch strategy
- State "DONE"       from "TODO"       [2023-10-23 Mon 07:58]
*** DONE :+key :-key for enabling/disabling tags
- State "DONE"       from "TODO"       [2023-10-23 Mon 08:19]
*** DONE use prefix commands for untag
- State "DONE"       from "TODO"       [2023-10-23 Mon 08:20]
*** TODO use prefix commands for remove-filter, negative-filter
*** TODO retire generic '-' key optional
*** TODO advertise other keybindings in tag window
*** TODO allow negative filters on categories
*** TODO use vtable for niceness
*** TODO mail window: support custom modes
**** TODO support "no mail window"
**** TODO support current display-raw mode
**** TODO support standard mu4e-body viewer
**** TODO support "auto-run lazily after x milliseconds"
**** TODO support "run external program" plus custom postprocessing for propertization
**** TODO support "view mode with custom keymap"
**** TODO support "window with lazy content (+keybind info)"
** Refine coding style once again
*** TODO key bindings refs: https://www.gnu.org/software/emacs/manual/html_node/elisp/Keys-in-Documentation.html
*** TODO vertically align formals
*** TODO avoid unnecessary (progn)
*** TODO use (unless) instead of (when (not))
*** TODO no -p for "foo", only for "foo-bar", e.g. "foop" and "foo-bar-p"
*** TODO no lambdas for hooks or global variables
*** TODO no hard-quoted (lambda)
*** TODO autoload cookies
*** TODO test macros: edebug specs
*** TODO boolean flags: "-flag" suffix
*** TODO max 24 lines per function
*** TODO C-x 4 a : ChangeLog, share with commit messages
*** TODO use add-function :filter-args for composing the mu4e-filter, remove-function afterwards
*** TODO major mode (tag buffer): (put 'funny-mode 'mode-class 'special)
*** TODO test function composition
*** TODO for both changelog and commit messages, put fun name in parentheses: (fun-name)
*** TODO package-lint
** TODO manual decision support
*** TODO utilise mail window (probably needs external support, e.g., rust's `maildir`)
*** TODO highlight current tags in tag window
** TODO refactoring
*** TODO remove all the "minor-mode" stuff where not needed
*** TODO organise function definitions better
** TODO decision and inspection stats
*** TODO track most recent "viewed tags" date per tag as reminder
*** TODO track most recent "viewed" date individually for selected tags ("todo")
*** TODO view tag stats
** TODO automatic decision support
*** TODO suggest tags
* Notes
** Bits and pieces about search

#+BEGIN_SRC elisp
  (defun creichen/printme (&rest all)
    (interactive)
    (message "printme: %s" all)
    all)

  (add-hook 'mu4e-search-hook 'creichen/printme)

  (setq creichen/mu4e-tagging-reverse-key-table-search (make-hash-table :test 'equal))
  (defun creichen/mu4e-tagging-search-tag (&rest tag)
    "Searches for the given tag or tags on top of the most recent mu4e-search.
     Arguments of the form :require A B C will require tags A, B, and C;
     :no-category searches for lack of category tagging."
    (mu4e)
    (
     mu4e-he
     mu4e--search-last-query
     )(lax-plist-get '(:bar "x" :foo "a" "b" :quux) :foo)


  (defun creichen/mu4e-tagging-search-interceptor-tag (&rest tag)
    (interactive)

    )

(creichen/mu4e-tagging-query-filter "foo")

#+END_SRC
